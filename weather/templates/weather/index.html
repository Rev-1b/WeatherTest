<!DOCTYPE html>
{% load static %}
<html lang="en">
<head>
    <meta charset="UTF-8">
    <link rel="stylesheet" href="{% static 'css/reset.css' %}">
    <link rel="stylesheet" href="{% static 'css/index.css' %}">
    <title>Title</title>
</head>
<body>

<div class="center">

    <form class='inputForm' id="cityInput" method="post" action="{% url 'index' %}">
        {% csrf_token %}

        <div class="input-box">{{ form.city_name }}<i class="fa-solid fa-user"></i></div>
        <div class="form-error">{{ form.city_name.errors }}</div>

        <button type="submit" class="search-button">Искать</button>
    </form>

    <div class="main-window">
        <div class="current-city">{{ weather.name }}</div>
        <div class="temperature">
            <h2>{{ weather.temp }}°C</h2>
            <div class="inline-image"><img src="{% static 'icons/'|add:weather.weather_icon %}.png"/></div>
        </div>

        <div class="additional-info">
            Время: {{ weather.time }} <br>
            Ощущается как: {{ weather.feels_like }}°C <br>
            Восход: {{ weather.sunrise }}<br>
            Закат: {{ weather.sunset }}
        </div>
        <div class="forecasts-section">
            {% for elem in forecast %}
                <div class="forecast">
                    <div class="text">
                        {{ elem.time }} <br>
                        Температура: {{ elem.temp }} <br>
                        Ощущается как: {{ elem.feels_like }}
                    </div>
                    <div class="inline-image"><img src="{% static 'icons/'|add:elem.weather_icon %}.png"/></div>
                </div>
            {% endfor %}
        </div>

    </div>

    <div class="prev-cities">
        <h3 class="title">История запросов</h3>
        {% if user.is_authenticated %}
            <div class="cities-container">
                {% for city in cities %}
                    <form class='inputForm' id="cityInput" method="post" action="{% url 'index' %}">
                        {% csrf_token %}

                        <input type="hidden" name="city_name" value={{ city.name }}>
                        <button type="submit" class="search-button">{{ city.name }}</button>
                    </form>
                {% endfor %}
            </div>
        {% else %}
            <div>Для того, чтобы видеть свою историю поиска, вам необходимо <a href="{% url 'register' %}">авторизоваться</a>!
            </div>
        {% endif %}
    </div>
</div>

</body>
</html>